
(function($,deck,undefined){var $d=$(document),updateCurrent=function(e,from,to){var opts=$[deck]('getOptions');$(opts.selectors.statusCurrent).text(opts.countNested?to+1:$[deck]('getSlide',to).data('rootSlide'));};$.extend(true,$[deck].defaults,{selectors:{statusCurrent:'.deck-status-current',statusTotal:'.deck-status-total'},countNested:true});$d.bind('deck.init',function(){var opts=$[deck]('getOptions'),slides=$[deck]('getSlides'),$current=$[deck]('getSlide'),ndx;if(opts.countNested){$(opts.selectors.statusTotal).text(slides.length);}
else{var rootIndex=1,slideTest=$.map([opts.classes.before,opts.classes.previous,opts.classes.current,opts.classes.next,opts.classes.after],function(el,i){return'.'+el;}).join(', ');$.each(slides,function(i,$el){var $parentSlides=$el.parentsUntil(opts.selectors.container,slideTest);$el.data('rootSlide',$parentSlides.length?$parentSlides.last().data('rootSlide'):rootIndex++);});$(opts.selectors.statusTotal).text(rootIndex-1);}
$.each(slides,function(i,$el){if($el===$current){ndx=i;return false;}});updateCurrent(null,ndx,ndx);}).bind('deck.change',updateCurrent);})(jQuery,'deck');