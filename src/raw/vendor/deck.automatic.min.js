
(function($,deck,undefined){var $d=$(document);var running=false;clearAutomaticTimeout=function(){if($[deck].automatic&&$[deck].automatic.timeout){window.clearTimeout($[deck].automatic.timeout);}};setTimeoutIfNeeded=function(e,from,to){clearAutomaticTimeout();var opts=$[deck]('getOptions');if(running){var elem=$[deck]('getSlide',to);var duration=opts.automatic.slideDuration;$.each(elem.attr('class').split(/\s+/),function(idx,cls){$.each(opts.classdata,function(feat_cls,features){if(cls==feat_cls&&features.duration){duration=features.duration;}});});var customDuration=elem.attr('data-duration');if(customDuration){duration=customDuration;}
if(duration>=0){if(to==$[deck]('getSlides').length-1){if(opts.automatic.cycle){$[deck].automatic={timeout:window.setTimeout(function(){$[deck]('go',0);if(e)e.preventDefault();},duration)};}
else{$(opts.selectors.automaticLink).removeClass(opts.classes.automaticRunning);$(opts.selectors.automaticLink).addClass(opts.classes.automaticStopped);}}
else{$[deck].automatic={timeout:window.setTimeout(function(){$[deck]('next');if(e)e.preventDefault();},duration)};}}}};$.extend(true,$[deck].defaults,{classes:{automaticRunning:'deck-automatic-running',automaticStopped:'deck-automatic-stopped'},selectors:{automaticLink:'.deck-automatic-link'},classdata:{},automatic:{startRunning:true,cycle:true,slideDuration:3000}});$[deck]('extend','isRunning',function(){return running;});$d.bind('deck.init',function(){var opts=$[deck]('getOptions'),slides=$[deck]('getSlides'),$current=$[deck]('getSlide'),ndx;$[deck]('extend','play',function(){var slides=$[deck]('getSlides');if(slides[slides.length-1]==$[deck]('getSlide')){$.deck('go',0);}
running=true;$(opts.selectors.automaticLink).addClass(opts.classes.automaticRunning);$(opts.selectors.automaticLink).removeClass(opts.classes.automaticStopped);$d.trigger('deck.onPlayToggle',true);$d.trigger('deck.onPlay');setTimeoutIfNeeded(null,slides.length,0);});$[deck]('extend','pause',function(){running=false;$(opts.selectors.automaticLink).addClass(opts.classes.automaticStopped);$(opts.selectors.automaticLink).removeClass(opts.classes.automaticRunning);$d.trigger('deck.onPlayToggle',true);$d.trigger('deck.onPause');clearAutomaticTimeout();});if(opts.automatic.startRunning){$[deck]('play');}
else{$[deck]('pause');}
setTimeoutIfNeeded(null,ndx,0);$(opts.selectors.automaticLink).unbind('click.deckautomatic').bind('click.deckautomatic',function(e){if(!running){$[deck]('play');}
else{$[deck]('pause');}});}).bind('deck.change',setTimeoutIfNeeded);})(jQuery,'deck');